apply from: "${rootDir}/buildApp.gradle"
apply plugin: 'kotlin-kapt'
apply from: "${rootDir}/practice.gradle"

android {
    defaultConfig {
        versionCode 10001
        versionName "1.0.1"
    }
    def env
    buildTypes {
        debug {
            env = "0"
            resValue("string", "PORT_NUMBER", "8200")
        }
        release {
            env = "1"
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
        buildTypes.each {
            it.buildConfigField("int", "ENV", env)
        }
    }
    flavorDimensions("default")
    productFlavors {
        tencent {
            dimension "default"
        }
        baidu {
            dimension "default"
        }
    }
}
android.applicationVariants.all { variant ->
    variant.outputs.all {
        def date = new Date().format("MMddHH")
        def productFlavorName = variant.productFlavors[0].name
        outputFileName = "应用名称" + "-${variant.versionName}-" + productFlavorName + "-" + date + "-${variant.buildType.name}" + ".apk"
    }
}

dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    api project(':core')
    implementation project(':ui')
    implementation Deps.RxBinding.base
    implementation Deps.appcompat
    implementation Deps.constraintLayout
    implementation Deps.recyclerview
    implementation Deps.ButterKnife.runtime
    annotationProcessor Deps.ButterKnife.processor
    implementation Deps.PermissionsDispatcher.runtime
    annotationProcessor Deps.PermissionsDispatcher.processor
    implementation Deps.Dagger.runtime
    kapt Deps.Dagger.runtime
    implementation Deps.gson
    implementation Deps.legacySupportV4
    implementation Deps.lifecycle
    implementation Deps.Retrofit.runtime
    implementation Deps.kotlin
    implementation Deps.material
    implementation Deps.rxpermissions
    implementation Deps.annotations
    implementation Deps.mmkv
    debugImplementation Deps.debugDb
    implementation Deps.background
    implementation Deps.timber
    implementation Deps.logger
    implementation Deps.flexbox
    implementation Deps.gridlayout
    implementation Deps.RxBinding.base
    implementation Deps.immersionbar
    debugImplementation Deps.Hyperion.debugCore
    releaseImplementation Deps.Hyperion.releaseCore
    debugImplementation Deps.Hyperion.debugAttr
    debugImplementation Deps.Hyperion.debugMeasurement
    debugImplementation Deps.Hyperion.debugDisk
    debugImplementation Deps.Hyperion.debugRecorder
    debugImplementation Deps.Hyperion.debugPhoenix
    debugImplementation Deps.Hyperion.debugCrash
    debugImplementation Deps.Hyperion.debugSP
    debugImplementation Deps.Hyperion.debugGeigerCounter
    debugImplementation Deps.Hyperion.debugTimber
    debugImplementation Deps.Hyperion.debugbuildConfig
    debugImplementation Deps.Hyperion.debugAppInfo
    implementation Deps.threeten
}
repositories {
    mavenCentral()
    maven { url 'https://jitpack.io' }//rxpermissions
}
