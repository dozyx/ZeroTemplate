apply from: "${rootDir}/buildApp.gradle"
apply plugin: 'kotlin-kapt'
apply from: "${rootDir}/practice.gradle"

android {
    defaultConfig {
        versionCode 10001
        versionName "1.0.1"
        multiDexEnabled true
    }
    def env
    buildTypes {
        debug {
            env = "0"
            resValue("string", "PORT_NUMBER", "8200")
        }
        release {
            env = "1"
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
        buildTypes.each {
            it.buildConfigField("int", "ENV", env)
        }
    }
    flavorDimensions("default")
    productFlavors {
        tencent {
            dimension "default"
        }
        baidu {
            dimension "default"
        }
    }
}
android.applicationVariants.all { variant ->
    variant.outputs.all {
        def date = new Date().format("MMddHH")
        def productFlavorName = variant.productFlavors[0].name
        outputFileName = "app" + "-${variant.versionName}-" + productFlavorName + "-" + date + "-${variant.buildType.name}" + ".apk"
    }
}

dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    api project(':core')
    implementation project(':ui')
    implementation DepsRxBinding.base
    implementation Deps.appcompat
    implementation Deps.constraintLayout
    implementation Deps.recyclerview
    implementation DepsButterKnife.runtime
    implementation 'androidx.appcompat:appcompat:1.0.2'
    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'
    kapt DepsButterKnife.processor
    implementation DepsPermissionsDispatcher.runtime
    annotationProcessor DepsPermissionsDispatcher.processor
    implementation DepsDagger.runtime
    kapt DepsDagger.runtime
    implementation Deps.gson
    implementation Deps.legacySupportV4
    implementation Deps.lifecycle
    implementation DepsRetrofit.runtime
    implementation Deps.kotlin
    implementation Deps.material
    implementation Deps.rxpermissions
    implementation Deps.annotations
    implementation Deps.mmkv
    debugImplementation Deps.debugDb
    implementation Deps.background
    implementation Deps.timber
    implementation Deps.logger
    implementation Deps.flexbox
    implementation Deps.gridlayout
    implementation Deps.immersionbar
    debugImplementation DepsHyperion.debugCore
    releaseImplementation DepsHyperion.releaseCore
    debugImplementation DepsHyperion.debugAttr
    debugImplementation DepsHyperion.debugMeasurement
    debugImplementation DepsHyperion.debugDisk
    debugImplementation DepsHyperion.debugRecorder
    debugImplementation DepsHyperion.debugPhoenix
    debugImplementation DepsHyperion.debugCrash
    debugImplementation DepsHyperion.debugSP
    debugImplementation DepsHyperion.debugGeigerCounter
    debugImplementation DepsHyperion.debugTimber
    debugImplementation DepsHyperion.debugbuildConfig
    debugImplementation DepsHyperion.debugAppInfo
    implementation Deps.threeten
    implementation Deps.convenientBanner
    implementation DepsGlide.runtime
    implementation Deps.adapterHelper
    annotationProcessor DepsGlide.processor
    implementation Deps.javaPoet
    implementation project(':butterknife-annotations')
    kapt project(':butterknife-compiler')
    implementation project(':autobuilder')
    annotationProcessor project(':autobuilder')
    implementation Deps.circleImageView
    implementation Deps.multidex
//    implementation ("com.github.bumptech.glide:okhttp3-integration:4.10.0"){
//        exclude group: "com.squareup.okhttp3", module: "okhttp"
//    }

//    冲突测试 start
    implementation 'com.google.guava:guava:20.0'
    implementation 'com.google.inject:guice:4.2.2'
    implementation 'org.javassist:javassist:3.27.0-GA'
//    冲突测试 end
}
repositories {
    mavenCentral()
    maven { url 'https://jitpack.io' }//rxpermissions
}
